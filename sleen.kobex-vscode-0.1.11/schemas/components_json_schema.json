{
  "$schema": "http://json-schema.org/draft-07/schema",
  "definitions": {
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "availability": {
      "type": "object",
      "properties": {
        "minVersion": {
          "$ref": "#/definitions/version",
          "description": "最小支持版本"
        },
        "maxVersion": {
          "$ref": "#/definitions/version",
          "description": "最大支持版本"
        },
        "kobexOnly": {
          "type": "boolean",
          "description": "是否为 Kobex 特有属性"
        },
        "deprecatedVersion": {
          "$ref": "#/definitions/version",
          "description": "属性在该版本被废弃"
        },
        "deprecatedMessage": {
          "type": "string",
          "description": "废弃说明"
        }
      }
    }
  },
  "type": "object",
  "additionalProperties": {
    "allOf": [
      {
        "type": "object",
        "properties": {
          "extends": {
            "type": "string",
            "description": "继承组件的属性"
          },
          "when": {
            "type": "string",
            "description": "该组件可用的条件。可使用的变量有：\n`$this` 该元素\n`$parent` 父元素\n`$parentView` 父元素（不包括 `block`）\n`$prev` 上一个元素\n\n元素可用的属性有：\n`tag` 元素标签名称\n`isRef` 是否是引用的组件\n`attributes` 元素已设置的属性字典"
          },
          "allowedChildren": {
            "type": "array",
            "description": "组件允许的子元素类型",
            "items": {
              "type": "string"
            }
          },
          "additionalAttributes": {
            "type": "boolean",
            "description": "是否允许组件有额外属性"
          },
          "attributes": {
            "type": "object",
            "description": "组件属性定义",
            "additionalProperties": {
              "allOf": [
                {
                  "type": "object",
                  "required": [
                    "type"
                  ],
                  "properties": {
                    "type": {
                      "type": "string",
                      "description": "属性类型",
                      "enum": [
                        "enum",
                        "string",
                        "number",
                        "boolean",
                        "color",
                        "array",
                        "any",
                        "event"
                      ]
                    },
                    "expType": {
                      "type": "string",
                      "enum": [
                        "both",
                        "never",
                        "always"
                      ],
                      "description": "表达式类型\n- `both` 可以使用表达式或常量\n- `never` 不能使用表达式\n- `always` 只能使用表达式"
                    },
                    "enum": {
                      "type": "array",
                      "description": "属性支持的枚举值"
                    },
                    "enumDescriptions": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      },
                      "description": "枚举值的描述"
                    },
                    "required": {
                      "type": "boolean",
                      "description": "是否为必填属性"
                    },
                    "default": {
                      "description": "为该属性提供默认值"
                    },
                    "snippet": {
                      "type": "string",
                      "description": "为该属性提供代码片段"
                    },
                    "description": {
                      "type": "string",
                      "description": "属性描述"
                    },
                    "dependencies": {
                      "type": "array",
                      "description": "依赖属性，当依赖属性都有时，该属性才可用",
                      "items": {
                        "type": "string"
                      }
                    },
                    "when": {
                      "type": "string",
                      "description": "该属性可用的条件。可使用的变量有：\n`$this` 该元素\n`$parent` 父元素\n`$parentView` 父元素（不包括 `block`）\n`$prev` 上一个元素\n\n元素可用的属性有：\n`tag` 元素标签名称\n`isRef` 是否是引用的组件\n`attributes` 元素已设置的属性字典"
                    }
                  }
                },
                {
                  "$ref": "#/definitions/availability"
                }
              ]
            }
          },
          "singleTag": {
            "type": "boolean",
            "description": "该组件是否单标签"
          },
          "snippet": {
            "type": "string",
            "description": "为该组件提供代码片段"
          },
          "description": {
            "type": "string",
            "description": "组件描述"
          }
        }
      },
      {
        "$ref": "#/definitions/availability"
      }
    ]
  }
}